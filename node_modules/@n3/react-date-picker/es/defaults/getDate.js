import addMonths from 'date-fns/addMonths';
import subMonths from 'date-fns/subMonths';
import getMonthHeight from "../utils/getMonthHeight";
import getOffset from "../utils/getOffset";
import getScrollSpeed from "../utils/getScrollSpeed";
import pxToDate from "../utils/pxToDate";

var getDate = function getDate(selected, deltaY) {
  var speed = getScrollSpeed(selected);
  var offset = getOffset(selected);
  var bottomOffset = getMonthHeight(selected) + offset;
  var date;

  if (deltaY < offset) {
    var month = subMonths(selected, 1);
    date = pxToDate(0, selected, speed, offset) + (deltaY - offset) * getScrollSpeed(month);
  } else if (deltaY > bottomOffset) {
    var _month = addMonths(selected, 1);

    date = pxToDate(0, selected, speed, bottomOffset) + (deltaY - bottomOffset) * getScrollSpeed(_month);
  } else {
    date = pxToDate(0, selected, speed, deltaY);
  }

  return new Date(date);
};

export default getDate;