"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault")["default"];

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _addDays = _interopRequireDefault(require("date-fns/addDays"));

var _addMonths = _interopRequireDefault(require("date-fns/addMonths"));

var _startOfMonth = _interopRequireDefault(require("date-fns/startOfMonth"));

var _endOfMonth = _interopRequireDefault(require("date-fns/endOfMonth"));

var _isSameMonth = _interopRequireDefault(require("date-fns/isSameMonth"));

var _locales = _interopRequireDefault(require("../locales"));

var createMonthDays = function createMonthDays(startDate) {
  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
  var locale = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'ru';

  if (!startDate) {
    return [];
  }

  var date = (0, _startOfMonth["default"])(startDate);
  var _locales$locale = _locales["default"][locale],
      weekdaysOrdering = _locales$locale.weekdaysOrdering,
      months = _locales$locale.months;
  return Array.from({
    length: length
  }).map(function (_, i) {
    var days = [];
    var startDateOfMonth = (0, _startOfMonth["default"])((0, _addMonths["default"])(date, i));
    var endDateOfMonth = (0, _endOfMonth["default"])((0, _addMonths["default"])(date, i));
    var monthStr = months[startDateOfMonth.getMonth()];

    var _loop = function _loop() {
      var week = Array.from({
        length: 7
      });
      weekdaysOrdering.forEach(function (item, j) {
        if (!(0, _isSameMonth["default"])(endDateOfMonth, startDateOfMonth)) {
          return;
        }

        if (startDateOfMonth.getDay() === item) {
          week[j] = startDateOfMonth;
          startDateOfMonth = (0, _addDays["default"])(startDateOfMonth, 1);
        } else {
          week[j] = null;
        }
      });
      days.push(week);
    };

    while ((0, _isSameMonth["default"])(endDateOfMonth, startDateOfMonth)) {
      _loop();
    }

    return {
      monthStr: monthStr,
      days: days
    };
  });
};

var _default = createMonthDays;
exports["default"] = _default;